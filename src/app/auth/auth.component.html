<div fxFlex="100" fxLayout="column" fxLayoutAlign=" none">
  <div fxFlexOffset.xl="10" fxFlexOffset.lg="10" fxFlexOffset.md="5" fxFlexOffset.sm="0" fxFlexOffset.xs="0" fxLayout="row"
    fxLayoutAlign="center stretch">

    <mat-card *ngIf="registrationStep == 1" fxFlex="33" fxFlex.md="50" fxFlex.sm="80" fxFlex.xs="100" class="relative">
      <mat-progress-bar [color]="'primary'" [mode]="'determinate'" [value]="50" class="absolute top">
      </mat-progress-bar>
      <div fxLayout="column" fxLayoutAlign="space-around center" *ngIf="isLoading">
        <mat-progress-spinner [color]="'primary'" [mode]="'indeterminate'"></mat-progress-spinner>
      </div>
      <div *ngIf="!isLoading">
        <h3 class="subheading-2" *ngIf="!forgotPasswordOpen" (click)="registrationOpen = false; forgotPasswordOpen = false" [ngClass]="{'inactive': registrationOpen}">
          Login
        </h3>
        <div class="form-container" fxLayout="column" fxLayoutAlign=" stretch">
          <div [ngClass]="{'inactive': (registrationOpen || forgotPasswordOpen)}">
            <app-log-in (submitted)="logIn($event)"></app-log-in>
            <div class="forgot-password-btn">
              <a (click)="forgotPasswordOpen = true" *ngIf="!forgotPasswordOpen">Forgot password?</a>
            </div>
            <div class="social-container" fxLayout="row" fxLayoutAlign="space-between none">
              <button mat-raised-button class="social-login facebook" fxFlex="50" (click)="loginWithFacebook()">
                <svg enable-background="new 0 0 57 57" height="57px" id="Layer_1" version="1.1" viewBox="0 0 57 57" width="57px" xml:space="preserve">
                  <path d="M40.43,21.739h-7.645v-5.014c0-1.883,1.248-2.322,2.127-2.322c0.877,0,5.395,0,5.395,0V6.125l-7.43-0.029  c-8.248,0-10.125,6.174-10.125,10.125v5.518h-4.77v8.53h4.77c0,10.947,0,24.137,0,24.137h10.033c0,0,0-13.32,0-24.137h6.77  L40.43,21.739z"
                  />
                </svg>
                Login with Facebook
              </button>
              <button mat-raised-button class="social-login google" fxFlex="50" (click)="loginWithGoogle()">
                <svg enable-background="new 0 0 57 57" height="57px" id="Layer_1" version="1.1" viewBox="0 0 57 57" width="57px" xml:space="preserve">
                  <g>
                    <path d="M52.218,25.852h-7.512v-7.51c0-0.573-0.465-1.039-1.037-1.039H41.53c-0.576,0-1.041,0.466-1.041,1.039v7.51h-7.512   c-0.572,0-1.039,0.467-1.039,1.041v2.139c0,0.574,0.467,1.039,1.039,1.039h7.512v7.514c0,0.574,0.465,1.039,1.041,1.039h2.139   c0.572,0,1.037-0.465,1.037-1.039V30.07h7.512c0.572,0,1.039-0.465,1.039-1.039v-2.139C53.257,26.318,52.79,25.852,52.218,25.852z"
                    />
                    <path d="M26.974,32.438c-1.58-1.119-3.016-2.76-3.041-3.264c0-0.918,0.082-1.357,2.141-2.961c2.662-2.084,4.128-4.824,4.128-7.719   c0-2.625-0.802-4.957-2.167-6.595h1.059c0.219,0,0.434-0.068,0.609-0.196l2.955-2.141c0.367-0.263,0.521-0.732,0.381-1.161   c-0.141-0.428-0.537-0.72-0.988-0.72H18.835c-1.446,0-2.915,0.255-4.357,0.751c-4.816,1.661-8.184,5.765-8.184,9.978   c0,5.969,4.624,10.493,10.805,10.635c-0.121,0.473-0.182,0.939-0.182,1.396c0,0.92,0.233,1.791,0.713,2.633c-0.056,0-0.11,0-0.17,0   c-5.892,0-11.21,2.891-13.229,7.193c-0.526,1.119-0.794,2.25-0.794,3.367c0,1.086,0.279,2.131,0.826,3.113   c1.269,2.27,3.994,4.031,7.677,4.961c1.901,0.48,3.944,0.725,6.065,0.725c1.906,0,3.723-0.246,5.403-0.732   c5.238-1.521,8.625-5.377,8.625-9.828C32.032,37.602,30.659,35.045,26.974,32.438z M10.283,42.215c0-3.107,3.947-5.832,8.446-5.832   h0.121c0.979,0.012,1.934,0.156,2.834,0.432c0.309,0.213,0.607,0.416,0.893,0.611c2.084,1.42,3.461,2.357,3.844,3.861   c0.09,0.379,0.135,0.758,0.135,1.125c0,3.869-2.885,5.83-8.578,5.83C13.663,48.242,10.283,45.596,10.283,42.215z M14.377,12.858   c0.703-0.803,1.624-1.227,2.658-1.227l0.117,0.002c2.921,0.086,5.716,3.341,6.23,7.256c0.289,2.192-0.199,4.253-1.301,5.509   c-0.705,0.805-1.613,1.229-2.689,1.229c0,0,0,0-0.002,0h-0.047c-2.861-0.088-5.716-3.467-6.227-7.377   C12.829,16.064,13.289,14.099,14.377,12.858z"
                    />
                  </g>
                </svg>
                Login with Google
              </button>
            </div>
          </div>
          <div class="forgot-password" [ngClass]="{'active': forgotPasswordOpen}">
            <app-forgot-password (submitted)="resetPassword($event)"></app-forgot-password>
          </div>
        </div>
        <div class="divider">&mdash;&mdash;&mdash; OR &mdash;&mdash;&mdash;</div>
        <h3 class="subheading-2" (click)="registrationOpen = true; forgotPasswordOpen = false" [ngClass]="{'inactive': !registrationOpen}">
          Register
        </h3>
        <div class="form-container" fxLayout="column" fxLayoutAlign=" stretch">
          <div [ngClass]="{'inactive':!registrationOpen}">
            <app-registration (submitted)="register($event)"></app-registration>
          </div>
        </div>
      </div>
    </mat-card>
    <mat-card *ngIf="registrationStep == 2" fxFlex="33" fxFlex.md="50" fxFlex.sm="80" fxFlex.xs="100" class="relative">
      <mat-progress-bar [color]="'primary'" [mode]="'determinate'" [value]="90" class="absolute top">
      </mat-progress-bar>
      <mat-progress-bar *ngIf="processingForm" [color]="'primary'" [mode]="'query'" class="absolute top">
      </mat-progress-bar>
      <div class="form-container" fxLayout="column" fxLayoutAlign=" stretch">
        <app-preferences (submitted)="submitPreferences($event)"></app-preferences>
      </div>
    </mat-card>
  </div>
</div>